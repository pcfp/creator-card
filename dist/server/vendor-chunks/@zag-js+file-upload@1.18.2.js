"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@zag-js+file-upload@1.18.2";
exports.ids = ["vendor-chunks/@zag-js+file-upload@1.18.2"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@zag-js+file-upload@1.18.2/node_modules/@zag-js/file-upload/dist/index.mjs":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@zag-js+file-upload@1.18.2/node_modules/@zag-js/file-upload/dist/index.mjs ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   anatomy: () => (/* binding */ anatomy),\n/* harmony export */   connect: () => (/* binding */ connect),\n/* harmony export */   itemProps: () => (/* binding */ itemProps),\n/* harmony export */   machine: () => (/* binding */ machine),\n/* harmony export */   props: () => (/* binding */ props),\n/* harmony export */   splitItemProps: () => (/* binding */ splitItemProps),\n/* harmony export */   splitProps: () => (/* binding */ splitProps)\n/* harmony export */ });\n/* harmony import */ var _zag_js_anatomy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @zag-js/anatomy */ \"(ssr)/./node_modules/.pnpm/@zag-js+anatomy@1.18.2/node_modules/@zag-js/anatomy/dist/index.mjs\");\n/* harmony import */ var _zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @zag-js/dom-query */ \"(ssr)/./node_modules/.pnpm/@zag-js+dom-query@1.18.2/node_modules/@zag-js/dom-query/dist/index.mjs\");\n/* harmony import */ var _zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @zag-js/file-utils */ \"(ssr)/./node_modules/.pnpm/@zag-js+file-utils@1.18.2/node_modules/@zag-js/file-utils/dist/index.mjs\");\n/* harmony import */ var _zag_js_i18n_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @zag-js/i18n-utils */ \"(ssr)/./node_modules/.pnpm/@zag-js+i18n-utils@1.18.2/node_modules/@zag-js/i18n-utils/dist/index.mjs\");\n/* harmony import */ var _zag_js_types__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @zag-js/types */ \"(ssr)/./node_modules/.pnpm/@zag-js+types@1.18.2/node_modules/@zag-js/types/dist/index.mjs\");\n/* harmony import */ var _zag_js_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @zag-js/utils */ \"(ssr)/./node_modules/.pnpm/@zag-js+utils@1.18.2/node_modules/@zag-js/utils/dist/index.mjs\");\n/* harmony import */ var _zag_js_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @zag-js/core */ \"(ssr)/./node_modules/.pnpm/@zag-js+core@1.18.2/node_modules/@zag-js/core/dist/index.mjs\");\n\n\n\n\n\n\n\n\n// src/file-upload.anatomy.ts\nvar anatomy = (0,_zag_js_anatomy__WEBPACK_IMPORTED_MODULE_0__.createAnatomy)(\"file-upload\").parts(\n  \"root\",\n  \"dropzone\",\n  \"item\",\n  \"itemDeleteTrigger\",\n  \"itemGroup\",\n  \"itemName\",\n  \"itemPreview\",\n  \"itemPreviewImage\",\n  \"itemSizeText\",\n  \"label\",\n  \"trigger\",\n  \"clearTrigger\"\n);\nvar parts = anatomy.build();\n\n// src/file-upload.dom.ts\nvar getRootId = (ctx) => ctx.ids?.root ?? `file:${ctx.id}`;\nvar getDropzoneId = (ctx) => ctx.ids?.dropzone ?? `file:${ctx.id}:dropzone`;\nvar getHiddenInputId = (ctx) => ctx.ids?.hiddenInput ?? `file:${ctx.id}:input`;\nvar getTriggerId = (ctx) => ctx.ids?.trigger ?? `file:${ctx.id}:trigger`;\nvar getLabelId = (ctx) => ctx.ids?.label ?? `file:${ctx.id}:label`;\nvar getItemId = (ctx, id) => ctx.ids?.item?.(id) ?? `file:${ctx.id}:item:${id}`;\nvar getItemNameId = (ctx, id) => ctx.ids?.itemName?.(id) ?? `file:${ctx.id}:item-name:${id}`;\nvar getItemSizeTextId = (ctx, id) => ctx.ids?.itemSizeText?.(id) ?? `file:${ctx.id}:item-size:${id}`;\nvar getItemPreviewId = (ctx, id) => ctx.ids?.itemPreview?.(id) ?? `file:${ctx.id}:item-preview:${id}`;\nvar getRootEl = (ctx) => ctx.getById(getRootId(ctx));\nvar getHiddenInputEl = (ctx) => ctx.getById(getHiddenInputId(ctx));\nvar getDropzoneEl = (ctx) => ctx.getById(getDropzoneId(ctx));\nfunction isEventWithFiles(event) {\n  const target = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventTarget)(event);\n  if (!event.dataTransfer) return !!target && \"files\" in target;\n  return event.dataTransfer.types.some((type) => {\n    return type === \"Files\" || type === \"application/x-moz-file\";\n  });\n}\nfunction isFilesWithinRange(ctx, incomingCount) {\n  const { context, prop, computed } = ctx;\n  if (!computed(\"multiple\") && incomingCount > 1) return false;\n  if (!computed(\"multiple\") && incomingCount + context.get(\"acceptedFiles\").length === 2) return true;\n  if (incomingCount + context.get(\"acceptedFiles\").length > prop(\"maxFiles\")) return false;\n  return true;\n}\nfunction getEventFiles(ctx, files) {\n  const { context, prop, computed } = ctx;\n  const acceptedFiles = [];\n  const rejectedFiles = [];\n  files.forEach((file) => {\n    const [accepted, acceptError] = (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isValidFileType)(file, computed(\"acceptAttr\"));\n    const [sizeMatch, sizeError] = (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isValidFileSize)(file, prop(\"minFileSize\"), prop(\"maxFileSize\"));\n    const validateErrors = prop(\"validate\")?.(file, {\n      acceptedFiles: context.get(\"acceptedFiles\"),\n      rejectedFiles: context.get(\"rejectedFiles\")\n    });\n    const valid = validateErrors ? validateErrors.length === 0 : true;\n    if (accepted && sizeMatch && valid) {\n      acceptedFiles.push(file);\n    } else {\n      const errors = [acceptError, sizeError];\n      if (!valid) errors.push(...validateErrors ?? []);\n      rejectedFiles.push({ file, errors: errors.filter(Boolean) });\n    }\n  });\n  if (!isFilesWithinRange(ctx, acceptedFiles.length)) {\n    acceptedFiles.forEach((file) => {\n      rejectedFiles.push({ file, errors: [\"TOO_MANY_FILES\"] });\n    });\n    acceptedFiles.splice(0);\n  }\n  return {\n    acceptedFiles,\n    rejectedFiles\n  };\n}\nfunction setInputFiles(inputEl, files) {\n  const win = (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getWindow)(inputEl);\n  try {\n    if (\"DataTransfer\" in win) {\n      const dataTransfer = new win.DataTransfer();\n      files.forEach((file) => {\n        dataTransfer.items.add(file);\n      });\n      inputEl.files = dataTransfer.files;\n    }\n  } catch {\n  }\n}\n\n// src/file-upload.connect.ts\nfunction connect(service, normalize) {\n  const { state, send, prop, computed, scope, context } = service;\n  const disabled = prop(\"disabled\");\n  const allowDrop = prop(\"allowDrop\");\n  const translations = prop(\"translations\");\n  const dragging = state.matches(\"dragging\");\n  const focused = state.matches(\"focused\") && !disabled;\n  return {\n    dragging,\n    focused,\n    disabled: !!disabled,\n    openFilePicker() {\n      if (disabled) return;\n      send({ type: \"OPEN\" });\n    },\n    deleteFile(file) {\n      send({ type: \"FILE.DELETE\", file });\n    },\n    acceptedFiles: context.get(\"acceptedFiles\"),\n    rejectedFiles: context.get(\"rejectedFiles\"),\n    setFiles(files) {\n      send({ type: \"FILES.SET\", files, count: files.length });\n    },\n    clearRejectedFiles() {\n      send({ type: \"REJECTED_FILES.CLEAR\" });\n    },\n    clearFiles() {\n      send({ type: \"FILES.CLEAR\" });\n    },\n    getFileSize(file) {\n      return (0,_zag_js_i18n_utils__WEBPACK_IMPORTED_MODULE_3__.formatBytes)(file.size, prop(\"locale\"));\n    },\n    createFileUrl(file, cb) {\n      const win = scope.getWin();\n      const url = win.URL.createObjectURL(file);\n      cb(url);\n      return () => win.URL.revokeObjectURL(url);\n    },\n    setClipboardFiles(dt) {\n      if (disabled) return false;\n      const items = Array.from(dt?.items ?? []);\n      const files = items.reduce((acc, item) => {\n        if (item.kind !== \"file\") return acc;\n        const file = item.getAsFile();\n        if (!file) return acc;\n        return [...acc, file];\n      }, []);\n      if (!files.length) return false;\n      send({ type: \"FILES.SET\", files });\n      return true;\n    },\n    getRootProps() {\n      return normalize.element({\n        ...parts.root.attrs,\n        dir: prop(\"dir\"),\n        id: getRootId(scope),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-dragging\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(dragging)\n      });\n    },\n    getDropzoneProps(props2 = {}) {\n      return normalize.element({\n        ...parts.dropzone.attrs,\n        dir: prop(\"dir\"),\n        id: getDropzoneId(scope),\n        tabIndex: disabled || props2.disableClick ? void 0 : 0,\n        role: props2.disableClick ? \"application\" : \"button\",\n        \"aria-label\": translations.dropzone,\n        \"aria-disabled\": disabled,\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-dragging\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(dragging),\n        onKeyDown(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (!(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.isSelfTarget)(event)) return;\n          if (props2.disableClick) return;\n          if (event.key !== \"Enter\" && event.key !== \" \") return;\n          send({ type: \"DROPZONE.CLICK\", src: \"keydown\" });\n        },\n        onClick(event) {\n          if (disabled) return;\n          if (event.defaultPrevented) return;\n          if (props2.disableClick) return;\n          if (!(0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.isSelfTarget)(event)) return;\n          if (event.currentTarget.localName === \"label\") {\n            event.preventDefault();\n          }\n          send({ type: \"DROPZONE.CLICK\" });\n        },\n        onDragOver(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          event.preventDefault();\n          event.stopPropagation();\n          try {\n            event.dataTransfer.dropEffect = \"copy\";\n          } catch {\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (!hasFiles) return;\n          const count = event.dataTransfer.items.length;\n          send({ type: \"DROPZONE.DRAG_OVER\", count });\n        },\n        onDragLeave(event) {\n          if (disabled) return;\n          if (!allowDrop) return;\n          if ((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.contains)(event.currentTarget, event.relatedTarget)) return;\n          send({ type: \"DROPZONE.DRAG_LEAVE\" });\n        },\n        onDrop(event) {\n          if (disabled) return;\n          if (allowDrop) {\n            event.preventDefault();\n            event.stopPropagation();\n          }\n          const hasFiles = isEventWithFiles(event);\n          if (disabled || !hasFiles) return;\n          (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.getFileEntries)(event.dataTransfer.items, prop(\"directory\")).then((files) => {\n            send({ type: \"DROPZONE.DROP\", files: (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.flatArray)(files) });\n          });\n        },\n        onFocus() {\n          if (disabled) return;\n          send({ type: \"DROPZONE.FOCUS\" });\n        },\n        onBlur() {\n          if (disabled) return;\n          send({ type: \"DROPZONE.BLUR\" });\n        }\n      });\n    },\n    getTriggerProps() {\n      return normalize.button({\n        ...parts.trigger.attrs,\n        dir: prop(\"dir\"),\n        id: getTriggerId(scope),\n        disabled,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"data-invalid\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(prop(\"invalid\")),\n        type: \"button\",\n        onClick(event) {\n          if (disabled) return;\n          if ((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.contains)(getDropzoneEl(scope), event.currentTarget)) {\n            event.stopPropagation();\n          }\n          send({ type: \"OPEN\" });\n        }\n      });\n    },\n    getHiddenInputProps() {\n      return normalize.input({\n        id: getHiddenInputId(scope),\n        tabIndex: -1,\n        disabled,\n        type: \"file\",\n        required: prop(\"required\"),\n        capture: prop(\"capture\"),\n        name: prop(\"name\"),\n        accept: computed(\"acceptAttr\"),\n        webkitdirectory: prop(\"directory\") ? \"\" : void 0,\n        multiple: computed(\"multiple\") || prop(\"maxFiles\") > 1,\n        onClick(event) {\n          event.stopPropagation();\n          event.currentTarget.value = \"\";\n        },\n        onInput(event) {\n          if (disabled) return;\n          const { files } = event.currentTarget;\n          send({ type: \"FILE.SELECT\", files: files ? Array.from(files) : [] });\n        },\n        style: _zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.visuallyHiddenStyle\n      });\n    },\n    getItemGroupProps() {\n      return normalize.element({\n        ...parts.itemGroup.attrs,\n        dir: prop(\"dir\"),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.item.attrs,\n        dir: prop(\"dir\"),\n        id: getItemId(scope, file.name),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemNameProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemName.attrs,\n        dir: prop(\"dir\"),\n        id: getItemNameId(scope, file.name),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemSizeTextProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemSizeText.attrs,\n        dir: prop(\"dir\"),\n        id: getItemSizeTextId(scope, file.name),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemPreviewProps(props2) {\n      const { file } = props2;\n      return normalize.element({\n        ...parts.itemPreview.attrs,\n        dir: prop(\"dir\"),\n        id: getItemPreviewId(scope, file.name),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemPreviewImageProps(props2) {\n      const { file, url } = props2;\n      const isImage = file.type.startsWith(\"image/\");\n      if (!isImage) {\n        throw new Error(\"Preview Image is only supported for image files\");\n      }\n      return normalize.img({\n        ...parts.itemPreviewImage.attrs,\n        alt: translations.itemPreview?.(file),\n        src: url,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getItemDeleteTriggerProps(props2) {\n      const { file } = props2;\n      return normalize.button({\n        ...parts.itemDeleteTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        \"aria-label\": translations.deleteFile?.(file),\n        onClick() {\n          if (disabled) return;\n          send({ type: \"FILE.DELETE\", file });\n        }\n      });\n    },\n    getLabelProps() {\n      return normalize.label({\n        ...parts.label.attrs,\n        dir: prop(\"dir\"),\n        id: getLabelId(scope),\n        htmlFor: getHiddenInputId(scope),\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled)\n      });\n    },\n    getClearTriggerProps() {\n      return normalize.button({\n        ...parts.clearTrigger.attrs,\n        dir: prop(\"dir\"),\n        type: \"button\",\n        disabled,\n        hidden: context.get(\"acceptedFiles\").length === 0,\n        \"data-disabled\": (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.dataAttr)(disabled),\n        onClick(event) {\n          if (event.defaultPrevented) return;\n          if (disabled) return;\n          send({ type: \"FILES.CLEAR\" });\n        }\n      });\n    }\n  };\n}\nvar machine = (0,_zag_js_core__WEBPACK_IMPORTED_MODULE_5__.createMachine)({\n  props({ props: props2 }) {\n    return {\n      minFileSize: 0,\n      maxFileSize: Number.POSITIVE_INFINITY,\n      maxFiles: 1,\n      allowDrop: true,\n      preventDocumentDrop: true,\n      ...props2,\n      translations: {\n        dropzone: \"dropzone\",\n        itemPreview: (file) => `preview of ${file.name}`,\n        deleteFile: (file) => `delete file ${file.name}`,\n        ...props2.translations\n      }\n    };\n  },\n  initialState() {\n    return \"idle\";\n  },\n  context({ prop, bindable, getContext }) {\n    return {\n      acceptedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isFileEqual)(file, b[i])),\n        hash(value) {\n          return value.map((file) => `${file.name}-${file.size}`).join(\",\");\n        },\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileAccept\")?.({ files: value });\n          prop(\"onFileChange\")?.({ acceptedFiles: value, rejectedFiles: ctx.get(\"rejectedFiles\") });\n        }\n      })),\n      rejectedFiles: bindable(() => ({\n        defaultValue: [],\n        isEqual: (a, b) => a.length === b?.length && a.every((file, i) => (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isFileEqual)(file.file, b[i].file)),\n        onChange(value) {\n          const ctx = getContext();\n          prop(\"onFileReject\")?.({ files: value });\n          prop(\"onFileChange\")?.({ acceptedFiles: ctx.get(\"acceptedFiles\"), rejectedFiles: value });\n        }\n      }))\n    };\n  },\n  computed: {\n    acceptAttr: ({ prop }) => (0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.getAcceptAttrString)(prop(\"accept\")),\n    multiple: ({ prop }) => prop(\"maxFiles\") > 1\n  },\n  watch({ track, context, action }) {\n    track([() => context.hash(\"acceptedFiles\")], () => {\n      action([\"syncInputElement\"]);\n    });\n  },\n  on: {\n    \"FILES.SET\": {\n      actions: [\"setFiles\"]\n    },\n    \"FILE.SELECT\": {\n      actions: [\"setEventFiles\"]\n    },\n    \"FILE.DELETE\": {\n      actions: [\"removeFile\"]\n    },\n    \"FILES.CLEAR\": {\n      actions: [\"clearFiles\"]\n    },\n    \"REJECTED_FILES.CLEAR\": {\n      actions: [\"clearRejectedFiles\"]\n    }\n  },\n  effects: [\"preventDocumentDrop\"],\n  states: {\n    idle: {\n      on: {\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.FOCUS\": {\n          target: \"focused\"\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    focused: {\n      on: {\n        \"DROPZONE.BLUR\": {\n          target: \"idle\"\n        },\n        OPEN: {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.CLICK\": {\n          actions: [\"openFilePicker\"]\n        },\n        \"DROPZONE.DRAG_OVER\": {\n          target: \"dragging\"\n        }\n      }\n    },\n    dragging: {\n      on: {\n        \"DROPZONE.DROP\": {\n          target: \"idle\",\n          actions: [\"setEventFiles\"]\n        },\n        \"DROPZONE.DRAG_LEAVE\": {\n          target: \"idle\"\n        }\n      }\n    }\n  },\n  implementations: {\n    effects: {\n      preventDocumentDrop({ prop, scope }) {\n        if (!prop(\"preventDocumentDrop\")) return;\n        if (!prop(\"allowDrop\")) return;\n        if (prop(\"disabled\")) return;\n        const doc = scope.getDoc();\n        const onDragOver = (event) => {\n          event?.preventDefault();\n        };\n        const onDrop = (event) => {\n          if ((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.contains)(getRootEl(scope), (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.getEventTarget)(event))) return;\n          event.preventDefault();\n        };\n        return (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.callAll)((0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.addDomEvent)(doc, \"dragover\", onDragOver, false), (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.addDomEvent)(doc, \"drop\", onDrop, false));\n      }\n    },\n    actions: {\n      syncInputElement({ scope, context }) {\n        queueMicrotask(() => {\n          const inputEl = getHiddenInputEl(scope);\n          if (!inputEl) return;\n          setInputFiles(inputEl, context.get(\"acceptedFiles\"));\n          const win = scope.getWin();\n          inputEl.dispatchEvent(new win.Event(\"change\", { bubbles: true }));\n        });\n      },\n      openFilePicker({ scope }) {\n        (0,_zag_js_dom_query__WEBPACK_IMPORTED_MODULE_1__.raf)(() => {\n          getHiddenInputEl(scope)?.click();\n        });\n      },\n      setFiles(params) {\n        const { computed, context, event } = params;\n        const { acceptedFiles, rejectedFiles } = getEventFiles(params, event.files);\n        context.set(\n          \"acceptedFiles\",\n          computed(\"multiple\") ? acceptedFiles : acceptedFiles.length > 0 ? [acceptedFiles[0]] : []\n        );\n        context.set(\"rejectedFiles\", rejectedFiles);\n      },\n      setEventFiles(params) {\n        const { computed, context, event, prop } = params;\n        const { acceptedFiles, rejectedFiles } = getEventFiles(params, event.files);\n        const set = (files) => {\n          if (computed(\"multiple\")) {\n            context.set(\"acceptedFiles\", (prev) => [...prev, ...files]);\n            context.set(\"rejectedFiles\", rejectedFiles);\n            return;\n          }\n          if (files.length) {\n            context.set(\"acceptedFiles\", [files[0]]);\n            context.set(\"rejectedFiles\", rejectedFiles);\n            return;\n          }\n          if (rejectedFiles.length) {\n            context.set(\"acceptedFiles\", context.get(\"acceptedFiles\"));\n            context.set(\"rejectedFiles\", rejectedFiles);\n          }\n        };\n        const transform = prop(\"transformFiles\");\n        if (transform) {\n          transform(acceptedFiles).then(set).catch((err) => {\n            (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.warn)(`[zag-js/file-upload] error transforming files\n${err}`);\n          });\n        } else {\n          set(acceptedFiles);\n        }\n      },\n      removeFile({ context, event }) {\n        const files = context.get(\"acceptedFiles\").filter((file) => !(0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isFileEqual)(file, event.file));\n        const rejectedFiles = context.get(\"rejectedFiles\").filter((item) => !(0,_zag_js_file_utils__WEBPACK_IMPORTED_MODULE_2__.isFileEqual)(item.file, event.file));\n        context.set(\"acceptedFiles\", files);\n        context.set(\"rejectedFiles\", rejectedFiles);\n      },\n      clearRejectedFiles({ context }) {\n        context.set(\"rejectedFiles\", []);\n      },\n      clearFiles({ context }) {\n        context.set(\"acceptedFiles\", []);\n        context.set(\"rejectedFiles\", []);\n      }\n    }\n  }\n});\nvar props = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_6__.createProps)()([\n  \"accept\",\n  \"allowDrop\",\n  \"capture\",\n  \"dir\",\n  \"directory\",\n  \"disabled\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"locale\",\n  \"maxFiles\",\n  \"maxFileSize\",\n  \"minFileSize\",\n  \"name\",\n  \"invalid\",\n  \"onFileAccept\",\n  \"onFileReject\",\n  \"onFileChange\",\n  \"preventDocumentDrop\",\n  \"required\",\n  \"translations\",\n  \"transformFiles\",\n  \"validate\"\n]);\nvar splitProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.createSplitProps)(props);\nvar itemProps = (0,_zag_js_types__WEBPACK_IMPORTED_MODULE_6__.createProps)()([\"file\"]);\nvar splitItemProps = (0,_zag_js_utils__WEBPACK_IMPORTED_MODULE_4__.createSplitProps)(itemProps);\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHphZy1qcytmaWxlLXVwbG9hZEAxLjE4LjIvbm9kZV9tb2R1bGVzL0B6YWctanMvZmlsZS11cGxvYWQvZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDdUY7QUFDZjtBQUN2RTtBQUNMO0FBQytCO0FBQzlCOztBQUU3QztBQUNBLGNBQWMsOERBQWE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtEQUFrRCxPQUFPO0FBQ3pELDBEQUEwRCxPQUFPO0FBQ2pFLGdFQUFnRSxPQUFPO0FBQ3ZFLHdEQUF3RCxPQUFPO0FBQy9ELG9EQUFvRCxPQUFPO0FBQzNELDREQUE0RCxPQUFPLFFBQVEsR0FBRztBQUM5RSxvRUFBb0UsT0FBTyxhQUFhLEdBQUc7QUFDM0YsNEVBQTRFLE9BQU8sYUFBYSxHQUFHO0FBQ25HLDBFQUEwRSxPQUFPLGdCQUFnQixHQUFHO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlFQUFjO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsVUFBVSwwQkFBMEI7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwQkFBMEI7QUFDcEM7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLG1FQUFlO0FBQ25ELG1DQUFtQyxtRUFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSwyQkFBMkIsc0NBQXNDO0FBQ2pFO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSwyQkFBMkIsa0NBQWtDO0FBQzdELEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw0REFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSw4Q0FBOEM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsY0FBYztBQUMzQixLQUFLO0FBQ0w7QUFDQSxhQUFhLDJCQUEyQjtBQUN4QyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsYUFBYSwrQ0FBK0M7QUFDNUQsS0FBSztBQUNMO0FBQ0EsYUFBYSw4QkFBOEI7QUFDM0MsS0FBSztBQUNMO0FBQ0EsYUFBYSxxQkFBcUI7QUFDbEMsS0FBSztBQUNMO0FBQ0EsYUFBYSwrREFBVztBQUN4QixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsYUFBYSwwQkFBMEI7QUFDdkM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBUTtBQUNqQyx5QkFBeUIsMkRBQVE7QUFDakMsT0FBTztBQUNQLEtBQUs7QUFDTCxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwyREFBUTtBQUNoQyx5QkFBeUIsMkRBQVE7QUFDakMseUJBQXlCLDJEQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0RBQVk7QUFDM0I7QUFDQTtBQUNBLGlCQUFpQix3Q0FBd0M7QUFDekQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSwrREFBWTtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0JBQXdCO0FBQ3pDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQ0FBbUM7QUFDcEQsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQVE7QUFDdEIsaUJBQWlCLDZCQUE2QjtBQUM5QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsa0VBQWM7QUFDeEIsbUJBQW1CLDhCQUE4Qix3REFBUyxTQUFTO0FBQ25FLFdBQVc7QUFDWCxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGlCQUFpQix3QkFBd0I7QUFDekMsU0FBUztBQUNUO0FBQ0E7QUFDQSxpQkFBaUIsdUJBQXVCO0FBQ3hDO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVE7QUFDakMsd0JBQXdCLDJEQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGNBQWMsMkRBQVE7QUFDdEI7QUFDQTtBQUNBLGlCQUFpQixjQUFjO0FBQy9CO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtCQUFrQixRQUFRO0FBQzFCLGlCQUFpQiw0REFBNEQ7QUFDN0UsU0FBUztBQUNULGVBQWUsa0VBQW1CO0FBQ2xDLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVE7QUFDakMsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBUTtBQUNqQyxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsY0FBYyxPQUFPO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFRO0FBQ2pDLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxjQUFjLE9BQU87QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVE7QUFDakMsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBUTtBQUNqQyxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsY0FBYyxZQUFZO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsMkRBQVE7QUFDakMsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBLGNBQWMsT0FBTztBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwyQkFBMkI7QUFDNUM7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwyREFBUTtBQUNqQyxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDJEQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixxQkFBcUI7QUFDdEM7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsY0FBYywyREFBYTtBQUMzQixVQUFVLGVBQWU7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLFVBQVU7QUFDdkQsNkNBQTZDLFVBQVU7QUFDdkQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWSw0QkFBNEI7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsMEVBQTBFLCtEQUFXO0FBQ3JGO0FBQ0Esd0NBQXdDLFVBQVUsR0FBRyxVQUFVO0FBQy9ELFNBQVM7QUFDVDtBQUNBO0FBQ0EsbUNBQW1DLGNBQWM7QUFDakQsbUNBQW1DLCtEQUErRDtBQUNsRztBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsMEVBQTBFLCtEQUFXO0FBQ3JGO0FBQ0E7QUFDQSxtQ0FBbUMsY0FBYztBQUNqRCxtQ0FBbUMsK0RBQStEO0FBQ2xHO0FBQ0EsT0FBTztBQUNQO0FBQ0EsR0FBRztBQUNIO0FBQ0EsbUJBQW1CLE1BQU0sS0FBSyx1RUFBbUI7QUFDakQsaUJBQWlCLE1BQU07QUFDdkIsR0FBRztBQUNILFVBQVUsd0JBQXdCO0FBQ2xDO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSw0QkFBNEIsYUFBYTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywyREFBUSxtQkFBbUIsaUVBQWM7QUFDdkQ7QUFDQTtBQUNBLGVBQWUsc0RBQU8sQ0FBQyw4REFBVyxzQ0FBc0MsOERBQVc7QUFDbkY7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5QkFBeUIsZ0JBQWdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsZUFBZTtBQUN6RSxTQUFTO0FBQ1QsT0FBTztBQUNQLHVCQUF1QixPQUFPO0FBQzlCLFFBQVEsc0RBQUc7QUFDWDtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSxnQkFBZ0IsMkJBQTJCO0FBQzNDLGdCQUFnQiwrQkFBK0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLGdCQUFnQixpQ0FBaUM7QUFDakQsZ0JBQWdCLCtCQUErQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbURBQUk7QUFDaEIsRUFBRSxJQUFJO0FBQ04sV0FBVztBQUNYLFVBQVU7QUFDVjtBQUNBO0FBQ0EsT0FBTztBQUNQLG1CQUFtQixnQkFBZ0I7QUFDbkMscUVBQXFFLCtEQUFXO0FBQ2hGLDZFQUE2RSwrREFBVztBQUN4RjtBQUNBO0FBQ0EsT0FBTztBQUNQLDJCQUEyQixTQUFTO0FBQ3BDO0FBQ0EsT0FBTztBQUNQLG1CQUFtQixTQUFTO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsWUFBWSwwREFBVztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsK0RBQWdCO0FBQ2pDLGdCQUFnQiwwREFBVztBQUMzQixxQkFBcUIsK0RBQWdCOztBQUU4QyIsInNvdXJjZXMiOlsiL1VzZXJzL3BldGVyL0RvY3VtZW50cy9HaXRIdWIvY3JlYXRvci1jYXJkL25vZGVfbW9kdWxlcy8ucG5wbS9AemFnLWpzK2ZpbGUtdXBsb2FkQDEuMTguMi9ub2RlX21vZHVsZXMvQHphZy1qcy9maWxlLXVwbG9hZC9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVBbmF0b215IH0gZnJvbSAnQHphZy1qcy9hbmF0b215JztcbmltcG9ydCB7IHJhZiwgYWRkRG9tRXZlbnQsIGdldFdpbmRvdywgY29udGFpbnMsIGdldEV2ZW50VGFyZ2V0LCBkYXRhQXR0ciwgdmlzdWFsbHlIaWRkZW5TdHlsZSwgaXNTZWxmVGFyZ2V0IH0gZnJvbSAnQHphZy1qcy9kb20tcXVlcnknO1xuaW1wb3J0IHsgZ2V0QWNjZXB0QXR0clN0cmluZywgaXNGaWxlRXF1YWwsIGlzVmFsaWRGaWxlVHlwZSwgaXNWYWxpZEZpbGVTaXplLCBnZXRGaWxlRW50cmllcyB9IGZyb20gJ0B6YWctanMvZmlsZS11dGlscyc7XG5pbXBvcnQgeyBmb3JtYXRCeXRlcyB9IGZyb20gJ0B6YWctanMvaTE4bi11dGlscyc7XG5pbXBvcnQgeyBjcmVhdGVQcm9wcyB9IGZyb20gJ0B6YWctanMvdHlwZXMnO1xuaW1wb3J0IHsgd2FybiwgY2FsbEFsbCwgY3JlYXRlU3BsaXRQcm9wcywgZmxhdEFycmF5IH0gZnJvbSAnQHphZy1qcy91dGlscyc7XG5pbXBvcnQgeyBjcmVhdGVNYWNoaW5lIH0gZnJvbSAnQHphZy1qcy9jb3JlJztcblxuLy8gc3JjL2ZpbGUtdXBsb2FkLmFuYXRvbXkudHNcbnZhciBhbmF0b215ID0gY3JlYXRlQW5hdG9teShcImZpbGUtdXBsb2FkXCIpLnBhcnRzKFxuICBcInJvb3RcIixcbiAgXCJkcm9wem9uZVwiLFxuICBcIml0ZW1cIixcbiAgXCJpdGVtRGVsZXRlVHJpZ2dlclwiLFxuICBcIml0ZW1Hcm91cFwiLFxuICBcIml0ZW1OYW1lXCIsXG4gIFwiaXRlbVByZXZpZXdcIixcbiAgXCJpdGVtUHJldmlld0ltYWdlXCIsXG4gIFwiaXRlbVNpemVUZXh0XCIsXG4gIFwibGFiZWxcIixcbiAgXCJ0cmlnZ2VyXCIsXG4gIFwiY2xlYXJUcmlnZ2VyXCJcbik7XG52YXIgcGFydHMgPSBhbmF0b215LmJ1aWxkKCk7XG5cbi8vIHNyYy9maWxlLXVwbG9hZC5kb20udHNcbnZhciBnZXRSb290SWQgPSAoY3R4KSA9PiBjdHguaWRzPy5yb290ID8/IGBmaWxlOiR7Y3R4LmlkfWA7XG52YXIgZ2V0RHJvcHpvbmVJZCA9IChjdHgpID0+IGN0eC5pZHM/LmRyb3B6b25lID8/IGBmaWxlOiR7Y3R4LmlkfTpkcm9wem9uZWA7XG52YXIgZ2V0SGlkZGVuSW5wdXRJZCA9IChjdHgpID0+IGN0eC5pZHM/LmhpZGRlbklucHV0ID8/IGBmaWxlOiR7Y3R4LmlkfTppbnB1dGA7XG52YXIgZ2V0VHJpZ2dlcklkID0gKGN0eCkgPT4gY3R4Lmlkcz8udHJpZ2dlciA/PyBgZmlsZToke2N0eC5pZH06dHJpZ2dlcmA7XG52YXIgZ2V0TGFiZWxJZCA9IChjdHgpID0+IGN0eC5pZHM/LmxhYmVsID8/IGBmaWxlOiR7Y3R4LmlkfTpsYWJlbGA7XG52YXIgZ2V0SXRlbUlkID0gKGN0eCwgaWQpID0+IGN0eC5pZHM/Lml0ZW0/LihpZCkgPz8gYGZpbGU6JHtjdHguaWR9Oml0ZW06JHtpZH1gO1xudmFyIGdldEl0ZW1OYW1lSWQgPSAoY3R4LCBpZCkgPT4gY3R4Lmlkcz8uaXRlbU5hbWU/LihpZCkgPz8gYGZpbGU6JHtjdHguaWR9Oml0ZW0tbmFtZToke2lkfWA7XG52YXIgZ2V0SXRlbVNpemVUZXh0SWQgPSAoY3R4LCBpZCkgPT4gY3R4Lmlkcz8uaXRlbVNpemVUZXh0Py4oaWQpID8/IGBmaWxlOiR7Y3R4LmlkfTppdGVtLXNpemU6JHtpZH1gO1xudmFyIGdldEl0ZW1QcmV2aWV3SWQgPSAoY3R4LCBpZCkgPT4gY3R4Lmlkcz8uaXRlbVByZXZpZXc/LihpZCkgPz8gYGZpbGU6JHtjdHguaWR9Oml0ZW0tcHJldmlldzoke2lkfWA7XG52YXIgZ2V0Um9vdEVsID0gKGN0eCkgPT4gY3R4LmdldEJ5SWQoZ2V0Um9vdElkKGN0eCkpO1xudmFyIGdldEhpZGRlbklucHV0RWwgPSAoY3R4KSA9PiBjdHguZ2V0QnlJZChnZXRIaWRkZW5JbnB1dElkKGN0eCkpO1xudmFyIGdldERyb3B6b25lRWwgPSAoY3R4KSA9PiBjdHguZ2V0QnlJZChnZXREcm9wem9uZUlkKGN0eCkpO1xuZnVuY3Rpb24gaXNFdmVudFdpdGhGaWxlcyhldmVudCkge1xuICBjb25zdCB0YXJnZXQgPSBnZXRFdmVudFRhcmdldChldmVudCk7XG4gIGlmICghZXZlbnQuZGF0YVRyYW5zZmVyKSByZXR1cm4gISF0YXJnZXQgJiYgXCJmaWxlc1wiIGluIHRhcmdldDtcbiAgcmV0dXJuIGV2ZW50LmRhdGFUcmFuc2Zlci50eXBlcy5zb21lKCh0eXBlKSA9PiB7XG4gICAgcmV0dXJuIHR5cGUgPT09IFwiRmlsZXNcIiB8fCB0eXBlID09PSBcImFwcGxpY2F0aW9uL3gtbW96LWZpbGVcIjtcbiAgfSk7XG59XG5mdW5jdGlvbiBpc0ZpbGVzV2l0aGluUmFuZ2UoY3R4LCBpbmNvbWluZ0NvdW50KSB7XG4gIGNvbnN0IHsgY29udGV4dCwgcHJvcCwgY29tcHV0ZWQgfSA9IGN0eDtcbiAgaWYgKCFjb21wdXRlZChcIm11bHRpcGxlXCIpICYmIGluY29taW5nQ291bnQgPiAxKSByZXR1cm4gZmFsc2U7XG4gIGlmICghY29tcHV0ZWQoXCJtdWx0aXBsZVwiKSAmJiBpbmNvbWluZ0NvdW50ICsgY29udGV4dC5nZXQoXCJhY2NlcHRlZEZpbGVzXCIpLmxlbmd0aCA9PT0gMikgcmV0dXJuIHRydWU7XG4gIGlmIChpbmNvbWluZ0NvdW50ICsgY29udGV4dC5nZXQoXCJhY2NlcHRlZEZpbGVzXCIpLmxlbmd0aCA+IHByb3AoXCJtYXhGaWxlc1wiKSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGdldEV2ZW50RmlsZXMoY3R4LCBmaWxlcykge1xuICBjb25zdCB7IGNvbnRleHQsIHByb3AsIGNvbXB1dGVkIH0gPSBjdHg7XG4gIGNvbnN0IGFjY2VwdGVkRmlsZXMgPSBbXTtcbiAgY29uc3QgcmVqZWN0ZWRGaWxlcyA9IFtdO1xuICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgY29uc3QgW2FjY2VwdGVkLCBhY2NlcHRFcnJvcl0gPSBpc1ZhbGlkRmlsZVR5cGUoZmlsZSwgY29tcHV0ZWQoXCJhY2NlcHRBdHRyXCIpKTtcbiAgICBjb25zdCBbc2l6ZU1hdGNoLCBzaXplRXJyb3JdID0gaXNWYWxpZEZpbGVTaXplKGZpbGUsIHByb3AoXCJtaW5GaWxlU2l6ZVwiKSwgcHJvcChcIm1heEZpbGVTaXplXCIpKTtcbiAgICBjb25zdCB2YWxpZGF0ZUVycm9ycyA9IHByb3AoXCJ2YWxpZGF0ZVwiKT8uKGZpbGUsIHtcbiAgICAgIGFjY2VwdGVkRmlsZXM6IGNvbnRleHQuZ2V0KFwiYWNjZXB0ZWRGaWxlc1wiKSxcbiAgICAgIHJlamVjdGVkRmlsZXM6IGNvbnRleHQuZ2V0KFwicmVqZWN0ZWRGaWxlc1wiKVxuICAgIH0pO1xuICAgIGNvbnN0IHZhbGlkID0gdmFsaWRhdGVFcnJvcnMgPyB2YWxpZGF0ZUVycm9ycy5sZW5ndGggPT09IDAgOiB0cnVlO1xuICAgIGlmIChhY2NlcHRlZCAmJiBzaXplTWF0Y2ggJiYgdmFsaWQpIHtcbiAgICAgIGFjY2VwdGVkRmlsZXMucHVzaChmaWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyb3JzID0gW2FjY2VwdEVycm9yLCBzaXplRXJyb3JdO1xuICAgICAgaWYgKCF2YWxpZCkgZXJyb3JzLnB1c2goLi4udmFsaWRhdGVFcnJvcnMgPz8gW10pO1xuICAgICAgcmVqZWN0ZWRGaWxlcy5wdXNoKHsgZmlsZSwgZXJyb3JzOiBlcnJvcnMuZmlsdGVyKEJvb2xlYW4pIH0pO1xuICAgIH1cbiAgfSk7XG4gIGlmICghaXNGaWxlc1dpdGhpblJhbmdlKGN0eCwgYWNjZXB0ZWRGaWxlcy5sZW5ndGgpKSB7XG4gICAgYWNjZXB0ZWRGaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICByZWplY3RlZEZpbGVzLnB1c2goeyBmaWxlLCBlcnJvcnM6IFtcIlRPT19NQU5ZX0ZJTEVTXCJdIH0pO1xuICAgIH0pO1xuICAgIGFjY2VwdGVkRmlsZXMuc3BsaWNlKDApO1xuICB9XG4gIHJldHVybiB7XG4gICAgYWNjZXB0ZWRGaWxlcyxcbiAgICByZWplY3RlZEZpbGVzXG4gIH07XG59XG5mdW5jdGlvbiBzZXRJbnB1dEZpbGVzKGlucHV0RWwsIGZpbGVzKSB7XG4gIGNvbnN0IHdpbiA9IGdldFdpbmRvdyhpbnB1dEVsKTtcbiAgdHJ5IHtcbiAgICBpZiAoXCJEYXRhVHJhbnNmZXJcIiBpbiB3aW4pIHtcbiAgICAgIGNvbnN0IGRhdGFUcmFuc2ZlciA9IG5ldyB3aW4uRGF0YVRyYW5zZmVyKCk7XG4gICAgICBmaWxlcy5mb3JFYWNoKChmaWxlKSA9PiB7XG4gICAgICAgIGRhdGFUcmFuc2Zlci5pdGVtcy5hZGQoZmlsZSk7XG4gICAgICB9KTtcbiAgICAgIGlucHV0RWwuZmlsZXMgPSBkYXRhVHJhbnNmZXIuZmlsZXM7XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgfVxufVxuXG4vLyBzcmMvZmlsZS11cGxvYWQuY29ubmVjdC50c1xuZnVuY3Rpb24gY29ubmVjdChzZXJ2aWNlLCBub3JtYWxpemUpIHtcbiAgY29uc3QgeyBzdGF0ZSwgc2VuZCwgcHJvcCwgY29tcHV0ZWQsIHNjb3BlLCBjb250ZXh0IH0gPSBzZXJ2aWNlO1xuICBjb25zdCBkaXNhYmxlZCA9IHByb3AoXCJkaXNhYmxlZFwiKTtcbiAgY29uc3QgYWxsb3dEcm9wID0gcHJvcChcImFsbG93RHJvcFwiKTtcbiAgY29uc3QgdHJhbnNsYXRpb25zID0gcHJvcChcInRyYW5zbGF0aW9uc1wiKTtcbiAgY29uc3QgZHJhZ2dpbmcgPSBzdGF0ZS5tYXRjaGVzKFwiZHJhZ2dpbmdcIik7XG4gIGNvbnN0IGZvY3VzZWQgPSBzdGF0ZS5tYXRjaGVzKFwiZm9jdXNlZFwiKSAmJiAhZGlzYWJsZWQ7XG4gIHJldHVybiB7XG4gICAgZHJhZ2dpbmcsXG4gICAgZm9jdXNlZCxcbiAgICBkaXNhYmxlZDogISFkaXNhYmxlZCxcbiAgICBvcGVuRmlsZVBpY2tlcigpIHtcbiAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgc2VuZCh7IHR5cGU6IFwiT1BFTlwiIH0pO1xuICAgIH0sXG4gICAgZGVsZXRlRmlsZShmaWxlKSB7XG4gICAgICBzZW5kKHsgdHlwZTogXCJGSUxFLkRFTEVURVwiLCBmaWxlIH0pO1xuICAgIH0sXG4gICAgYWNjZXB0ZWRGaWxlczogY29udGV4dC5nZXQoXCJhY2NlcHRlZEZpbGVzXCIpLFxuICAgIHJlamVjdGVkRmlsZXM6IGNvbnRleHQuZ2V0KFwicmVqZWN0ZWRGaWxlc1wiKSxcbiAgICBzZXRGaWxlcyhmaWxlcykge1xuICAgICAgc2VuZCh7IHR5cGU6IFwiRklMRVMuU0VUXCIsIGZpbGVzLCBjb3VudDogZmlsZXMubGVuZ3RoIH0pO1xuICAgIH0sXG4gICAgY2xlYXJSZWplY3RlZEZpbGVzKCkge1xuICAgICAgc2VuZCh7IHR5cGU6IFwiUkVKRUNURURfRklMRVMuQ0xFQVJcIiB9KTtcbiAgICB9LFxuICAgIGNsZWFyRmlsZXMoKSB7XG4gICAgICBzZW5kKHsgdHlwZTogXCJGSUxFUy5DTEVBUlwiIH0pO1xuICAgIH0sXG4gICAgZ2V0RmlsZVNpemUoZmlsZSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEJ5dGVzKGZpbGUuc2l6ZSwgcHJvcChcImxvY2FsZVwiKSk7XG4gICAgfSxcbiAgICBjcmVhdGVGaWxlVXJsKGZpbGUsIGNiKSB7XG4gICAgICBjb25zdCB3aW4gPSBzY29wZS5nZXRXaW4oKTtcbiAgICAgIGNvbnN0IHVybCA9IHdpbi5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgY2IodXJsKTtcbiAgICAgIHJldHVybiAoKSA9PiB3aW4uVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgIH0sXG4gICAgc2V0Q2xpcGJvYXJkRmlsZXMoZHQpIHtcbiAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgY29uc3QgaXRlbXMgPSBBcnJheS5mcm9tKGR0Py5pdGVtcyA/PyBbXSk7XG4gICAgICBjb25zdCBmaWxlcyA9IGl0ZW1zLnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XG4gICAgICAgIGlmIChpdGVtLmtpbmQgIT09IFwiZmlsZVwiKSByZXR1cm4gYWNjO1xuICAgICAgICBjb25zdCBmaWxlID0gaXRlbS5nZXRBc0ZpbGUoKTtcbiAgICAgICAgaWYgKCFmaWxlKSByZXR1cm4gYWNjO1xuICAgICAgICByZXR1cm4gWy4uLmFjYywgZmlsZV07XG4gICAgICB9LCBbXSk7XG4gICAgICBpZiAoIWZpbGVzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgc2VuZCh7IHR5cGU6IFwiRklMRVMuU0VUXCIsIGZpbGVzIH0pO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBnZXRSb290UHJvcHMoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5yb290LmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIGlkOiBnZXRSb290SWQoc2NvcGUpLFxuICAgICAgICBcImRhdGEtZGlzYWJsZWRcIjogZGF0YUF0dHIoZGlzYWJsZWQpLFxuICAgICAgICBcImRhdGEtZHJhZ2dpbmdcIjogZGF0YUF0dHIoZHJhZ2dpbmcpXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldERyb3B6b25lUHJvcHMocHJvcHMyID0ge30pIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLmRyb3B6b25lLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIGlkOiBnZXREcm9wem9uZUlkKHNjb3BlKSxcbiAgICAgICAgdGFiSW5kZXg6IGRpc2FibGVkIHx8IHByb3BzMi5kaXNhYmxlQ2xpY2sgPyB2b2lkIDAgOiAwLFxuICAgICAgICByb2xlOiBwcm9wczIuZGlzYWJsZUNsaWNrID8gXCJhcHBsaWNhdGlvblwiIDogXCJidXR0b25cIixcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHRyYW5zbGF0aW9ucy5kcm9wem9uZSxcbiAgICAgICAgXCJhcmlhLWRpc2FibGVkXCI6IGRpc2FibGVkLFxuICAgICAgICBcImRhdGEtaW52YWxpZFwiOiBkYXRhQXR0cihwcm9wKFwiaW52YWxpZFwiKSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1kcmFnZ2luZ1wiOiBkYXRhQXR0cihkcmFnZ2luZyksXG4gICAgICAgIG9uS2V5RG93bihldmVudCkge1xuICAgICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKCFpc1NlbGZUYXJnZXQoZXZlbnQpKSByZXR1cm47XG4gICAgICAgICAgaWYgKHByb3BzMi5kaXNhYmxlQ2xpY2spIHJldHVybjtcbiAgICAgICAgICBpZiAoZXZlbnQua2V5ICE9PSBcIkVudGVyXCIgJiYgZXZlbnQua2V5ICE9PSBcIiBcIikgcmV0dXJuO1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkRST1BaT05FLkNMSUNLXCIsIHNyYzogXCJrZXlkb3duXCIgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChwcm9wczIuZGlzYWJsZUNsaWNrKSByZXR1cm47XG4gICAgICAgICAgaWYgKCFpc1NlbGZUYXJnZXQoZXZlbnQpKSByZXR1cm47XG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubG9jYWxOYW1lID09PSBcImxhYmVsXCIpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkRST1BaT05FLkNMSUNLXCIgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRHJhZ092ZXIoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICBpZiAoIWFsbG93RHJvcCkgcmV0dXJuO1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gXCJjb3B5XCI7XG4gICAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGhhc0ZpbGVzID0gaXNFdmVudFdpdGhGaWxlcyhldmVudCk7XG4gICAgICAgICAgaWYgKCFoYXNGaWxlcykgcmV0dXJuO1xuICAgICAgICAgIGNvbnN0IGNvdW50ID0gZXZlbnQuZGF0YVRyYW5zZmVyLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJEUk9QWk9ORS5EUkFHX09WRVJcIiwgY291bnQgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRHJhZ0xlYXZlKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG4gICAgICAgICAgaWYgKCFhbGxvd0Ryb3ApIHJldHVybjtcbiAgICAgICAgICBpZiAoY29udGFpbnMoZXZlbnQuY3VycmVudFRhcmdldCwgZXZlbnQucmVsYXRlZFRhcmdldCkpIHJldHVybjtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJEUk9QWk9ORS5EUkFHX0xFQVZFXCIgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uRHJvcChldmVudCkge1xuICAgICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChhbGxvd0Ryb3ApIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgaGFzRmlsZXMgPSBpc0V2ZW50V2l0aEZpbGVzKGV2ZW50KTtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQgfHwgIWhhc0ZpbGVzKSByZXR1cm47XG4gICAgICAgICAgZ2V0RmlsZUVudHJpZXMoZXZlbnQuZGF0YVRyYW5zZmVyLml0ZW1zLCBwcm9wKFwiZGlyZWN0b3J5XCIpKS50aGVuKChmaWxlcykgPT4ge1xuICAgICAgICAgICAgc2VuZCh7IHR5cGU6IFwiRFJPUFpPTkUuRFJPUFwiLCBmaWxlczogZmxhdEFycmF5KGZpbGVzKSB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25Gb2N1cygpIHtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJEUk9QWk9ORS5GT0NVU1wiIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkJsdXIoKSB7XG4gICAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiRFJPUFpPTkUuQkxVUlwiIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldFRyaWdnZXJQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuYnV0dG9uKHtcbiAgICAgICAgLi4ucGFydHMudHJpZ2dlci5hdHRycyxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICBpZDogZ2V0VHJpZ2dlcklkKHNjb3BlKSxcbiAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZCksXG4gICAgICAgIFwiZGF0YS1pbnZhbGlkXCI6IGRhdGFBdHRyKHByb3AoXCJpbnZhbGlkXCIpKSxcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcbiAgICAgICAgb25DbGljayhldmVudCkge1xuICAgICAgICAgIGlmIChkaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgICAgIGlmIChjb250YWlucyhnZXREcm9wem9uZUVsKHNjb3BlKSwgZXZlbnQuY3VycmVudFRhcmdldCkpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJPUEVOXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0SGlkZGVuSW5wdXRQcm9wcygpIHtcbiAgICAgIHJldHVybiBub3JtYWxpemUuaW5wdXQoe1xuICAgICAgICBpZDogZ2V0SGlkZGVuSW5wdXRJZChzY29wZSksXG4gICAgICAgIHRhYkluZGV4OiAtMSxcbiAgICAgICAgZGlzYWJsZWQsXG4gICAgICAgIHR5cGU6IFwiZmlsZVwiLFxuICAgICAgICByZXF1aXJlZDogcHJvcChcInJlcXVpcmVkXCIpLFxuICAgICAgICBjYXB0dXJlOiBwcm9wKFwiY2FwdHVyZVwiKSxcbiAgICAgICAgbmFtZTogcHJvcChcIm5hbWVcIiksXG4gICAgICAgIGFjY2VwdDogY29tcHV0ZWQoXCJhY2NlcHRBdHRyXCIpLFxuICAgICAgICB3ZWJraXRkaXJlY3Rvcnk6IHByb3AoXCJkaXJlY3RvcnlcIikgPyBcIlwiIDogdm9pZCAwLFxuICAgICAgICBtdWx0aXBsZTogY29tcHV0ZWQoXCJtdWx0aXBsZVwiKSB8fCBwcm9wKFwibWF4RmlsZXNcIikgPiAxLFxuICAgICAgICBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIH0sXG4gICAgICAgIG9uSW5wdXQoZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICBjb25zdCB7IGZpbGVzIH0gPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICAgIHNlbmQoeyB0eXBlOiBcIkZJTEUuU0VMRUNUXCIsIGZpbGVzOiBmaWxlcyA/IEFycmF5LmZyb20oZmlsZXMpIDogW10gfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHN0eWxlOiB2aXN1YWxseUhpZGRlblN0eWxlXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGdldEl0ZW1Hcm91cFByb3BzKCkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMuaXRlbUdyb3VwLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZClcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0SXRlbVByb3BzKHByb3BzMikge1xuICAgICAgY29uc3QgeyBmaWxlIH0gPSBwcm9wczI7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmVsZW1lbnQoe1xuICAgICAgICAuLi5wYXJ0cy5pdGVtLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIGlkOiBnZXRJdGVtSWQoc2NvcGUsIGZpbGUubmFtZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZClcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0SXRlbU5hbWVQcm9wcyhwcm9wczIpIHtcbiAgICAgIGNvbnN0IHsgZmlsZSB9ID0gcHJvcHMyO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMuaXRlbU5hbWUuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgaWQ6IGdldEl0ZW1OYW1lSWQoc2NvcGUsIGZpbGUubmFtZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZClcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0SXRlbVNpemVUZXh0UHJvcHMocHJvcHMyKSB7XG4gICAgICBjb25zdCB7IGZpbGUgfSA9IHByb3BzMjtcbiAgICAgIHJldHVybiBub3JtYWxpemUuZWxlbWVudCh7XG4gICAgICAgIC4uLnBhcnRzLml0ZW1TaXplVGV4dC5hdHRycyxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICBpZDogZ2V0SXRlbVNpemVUZXh0SWQoc2NvcGUsIGZpbGUubmFtZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZClcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0SXRlbVByZXZpZXdQcm9wcyhwcm9wczIpIHtcbiAgICAgIGNvbnN0IHsgZmlsZSB9ID0gcHJvcHMyO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5lbGVtZW50KHtcbiAgICAgICAgLi4ucGFydHMuaXRlbVByZXZpZXcuYXR0cnMsXG4gICAgICAgIGRpcjogcHJvcChcImRpclwiKSxcbiAgICAgICAgaWQ6IGdldEl0ZW1QcmV2aWV3SWQoc2NvcGUsIGZpbGUubmFtZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZClcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0SXRlbVByZXZpZXdJbWFnZVByb3BzKHByb3BzMikge1xuICAgICAgY29uc3QgeyBmaWxlLCB1cmwgfSA9IHByb3BzMjtcbiAgICAgIGNvbnN0IGlzSW1hZ2UgPSBmaWxlLnR5cGUuc3RhcnRzV2l0aChcImltYWdlL1wiKTtcbiAgICAgIGlmICghaXNJbWFnZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcmV2aWV3IEltYWdlIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBpbWFnZSBmaWxlc1wiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub3JtYWxpemUuaW1nKHtcbiAgICAgICAgLi4ucGFydHMuaXRlbVByZXZpZXdJbWFnZS5hdHRycyxcbiAgICAgICAgYWx0OiB0cmFuc2xhdGlvbnMuaXRlbVByZXZpZXc/LihmaWxlKSxcbiAgICAgICAgc3JjOiB1cmwsXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZClcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0SXRlbURlbGV0ZVRyaWdnZXJQcm9wcyhwcm9wczIpIHtcbiAgICAgIGNvbnN0IHsgZmlsZSB9ID0gcHJvcHMyO1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5idXR0b24oe1xuICAgICAgICAuLi5wYXJ0cy5pdGVtRGVsZXRlVHJpZ2dlci5hdHRycyxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgXCJkYXRhLWRpc2FibGVkXCI6IGRhdGFBdHRyKGRpc2FibGVkKSxcbiAgICAgICAgXCJhcmlhLWxhYmVsXCI6IHRyYW5zbGF0aW9ucy5kZWxldGVGaWxlPy4oZmlsZSksXG4gICAgICAgIG9uQ2xpY2soKSB7XG4gICAgICAgICAgaWYgKGRpc2FibGVkKSByZXR1cm47XG4gICAgICAgICAgc2VuZCh7IHR5cGU6IFwiRklMRS5ERUxFVEVcIiwgZmlsZSB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBnZXRMYWJlbFByb3BzKCkge1xuICAgICAgcmV0dXJuIG5vcm1hbGl6ZS5sYWJlbCh7XG4gICAgICAgIC4uLnBhcnRzLmxhYmVsLmF0dHJzLFxuICAgICAgICBkaXI6IHByb3AoXCJkaXJcIiksXG4gICAgICAgIGlkOiBnZXRMYWJlbElkKHNjb3BlKSxcbiAgICAgICAgaHRtbEZvcjogZ2V0SGlkZGVuSW5wdXRJZChzY29wZSksXG4gICAgICAgIFwiZGF0YS1kaXNhYmxlZFwiOiBkYXRhQXR0cihkaXNhYmxlZClcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgZ2V0Q2xlYXJUcmlnZ2VyUHJvcHMoKSB7XG4gICAgICByZXR1cm4gbm9ybWFsaXplLmJ1dHRvbih7XG4gICAgICAgIC4uLnBhcnRzLmNsZWFyVHJpZ2dlci5hdHRycyxcbiAgICAgICAgZGlyOiBwcm9wKFwiZGlyXCIpLFxuICAgICAgICB0eXBlOiBcImJ1dHRvblwiLFxuICAgICAgICBkaXNhYmxlZCxcbiAgICAgICAgaGlkZGVuOiBjb250ZXh0LmdldChcImFjY2VwdGVkRmlsZXNcIikubGVuZ3RoID09PSAwLFxuICAgICAgICBcImRhdGEtZGlzYWJsZWRcIjogZGF0YUF0dHIoZGlzYWJsZWQpLFxuICAgICAgICBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcbiAgICAgICAgICBpZiAoZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICBzZW5kKHsgdHlwZTogXCJGSUxFUy5DTEVBUlwiIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG52YXIgbWFjaGluZSA9IGNyZWF0ZU1hY2hpbmUoe1xuICBwcm9wcyh7IHByb3BzOiBwcm9wczIgfSkge1xuICAgIHJldHVybiB7XG4gICAgICBtaW5GaWxlU2l6ZTogMCxcbiAgICAgIG1heEZpbGVTaXplOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICBtYXhGaWxlczogMSxcbiAgICAgIGFsbG93RHJvcDogdHJ1ZSxcbiAgICAgIHByZXZlbnREb2N1bWVudERyb3A6IHRydWUsXG4gICAgICAuLi5wcm9wczIsXG4gICAgICB0cmFuc2xhdGlvbnM6IHtcbiAgICAgICAgZHJvcHpvbmU6IFwiZHJvcHpvbmVcIixcbiAgICAgICAgaXRlbVByZXZpZXc6IChmaWxlKSA9PiBgcHJldmlldyBvZiAke2ZpbGUubmFtZX1gLFxuICAgICAgICBkZWxldGVGaWxlOiAoZmlsZSkgPT4gYGRlbGV0ZSBmaWxlICR7ZmlsZS5uYW1lfWAsXG4gICAgICAgIC4uLnByb3BzMi50cmFuc2xhdGlvbnNcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuICBpbml0aWFsU3RhdGUoKSB7XG4gICAgcmV0dXJuIFwiaWRsZVwiO1xuICB9LFxuICBjb250ZXh0KHsgcHJvcCwgYmluZGFibGUsIGdldENvbnRleHQgfSkge1xuICAgIHJldHVybiB7XG4gICAgICBhY2NlcHRlZEZpbGVzOiBiaW5kYWJsZSgoKSA9PiAoe1xuICAgICAgICBkZWZhdWx0VmFsdWU6IFtdLFxuICAgICAgICBpc0VxdWFsOiAoYSwgYikgPT4gYS5sZW5ndGggPT09IGI/Lmxlbmd0aCAmJiBhLmV2ZXJ5KChmaWxlLCBpKSA9PiBpc0ZpbGVFcXVhbChmaWxlLCBiW2ldKSksXG4gICAgICAgIGhhc2godmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUubWFwKChmaWxlKSA9PiBgJHtmaWxlLm5hbWV9LSR7ZmlsZS5zaXplfWApLmpvaW4oXCIsXCIpO1xuICAgICAgICB9LFxuICAgICAgICBvbkNoYW5nZSh2YWx1ZSkge1xuICAgICAgICAgIGNvbnN0IGN0eCA9IGdldENvbnRleHQoKTtcbiAgICAgICAgICBwcm9wKFwib25GaWxlQWNjZXB0XCIpPy4oeyBmaWxlczogdmFsdWUgfSk7XG4gICAgICAgICAgcHJvcChcIm9uRmlsZUNoYW5nZVwiKT8uKHsgYWNjZXB0ZWRGaWxlczogdmFsdWUsIHJlamVjdGVkRmlsZXM6IGN0eC5nZXQoXCJyZWplY3RlZEZpbGVzXCIpIH0pO1xuICAgICAgICB9XG4gICAgICB9KSksXG4gICAgICByZWplY3RlZEZpbGVzOiBiaW5kYWJsZSgoKSA9PiAoe1xuICAgICAgICBkZWZhdWx0VmFsdWU6IFtdLFxuICAgICAgICBpc0VxdWFsOiAoYSwgYikgPT4gYS5sZW5ndGggPT09IGI/Lmxlbmd0aCAmJiBhLmV2ZXJ5KChmaWxlLCBpKSA9PiBpc0ZpbGVFcXVhbChmaWxlLmZpbGUsIGJbaV0uZmlsZSkpLFxuICAgICAgICBvbkNoYW5nZSh2YWx1ZSkge1xuICAgICAgICAgIGNvbnN0IGN0eCA9IGdldENvbnRleHQoKTtcbiAgICAgICAgICBwcm9wKFwib25GaWxlUmVqZWN0XCIpPy4oeyBmaWxlczogdmFsdWUgfSk7XG4gICAgICAgICAgcHJvcChcIm9uRmlsZUNoYW5nZVwiKT8uKHsgYWNjZXB0ZWRGaWxlczogY3R4LmdldChcImFjY2VwdGVkRmlsZXNcIiksIHJlamVjdGVkRmlsZXM6IHZhbHVlIH0pO1xuICAgICAgICB9XG4gICAgICB9KSlcbiAgICB9O1xuICB9LFxuICBjb21wdXRlZDoge1xuICAgIGFjY2VwdEF0dHI6ICh7IHByb3AgfSkgPT4gZ2V0QWNjZXB0QXR0clN0cmluZyhwcm9wKFwiYWNjZXB0XCIpKSxcbiAgICBtdWx0aXBsZTogKHsgcHJvcCB9KSA9PiBwcm9wKFwibWF4RmlsZXNcIikgPiAxXG4gIH0sXG4gIHdhdGNoKHsgdHJhY2ssIGNvbnRleHQsIGFjdGlvbiB9KSB7XG4gICAgdHJhY2soWygpID0+IGNvbnRleHQuaGFzaChcImFjY2VwdGVkRmlsZXNcIildLCAoKSA9PiB7XG4gICAgICBhY3Rpb24oW1wic3luY0lucHV0RWxlbWVudFwiXSk7XG4gICAgfSk7XG4gIH0sXG4gIG9uOiB7XG4gICAgXCJGSUxFUy5TRVRcIjoge1xuICAgICAgYWN0aW9uczogW1wic2V0RmlsZXNcIl1cbiAgICB9LFxuICAgIFwiRklMRS5TRUxFQ1RcIjoge1xuICAgICAgYWN0aW9uczogW1wic2V0RXZlbnRGaWxlc1wiXVxuICAgIH0sXG4gICAgXCJGSUxFLkRFTEVURVwiOiB7XG4gICAgICBhY3Rpb25zOiBbXCJyZW1vdmVGaWxlXCJdXG4gICAgfSxcbiAgICBcIkZJTEVTLkNMRUFSXCI6IHtcbiAgICAgIGFjdGlvbnM6IFtcImNsZWFyRmlsZXNcIl1cbiAgICB9LFxuICAgIFwiUkVKRUNURURfRklMRVMuQ0xFQVJcIjoge1xuICAgICAgYWN0aW9uczogW1wiY2xlYXJSZWplY3RlZEZpbGVzXCJdXG4gICAgfVxuICB9LFxuICBlZmZlY3RzOiBbXCJwcmV2ZW50RG9jdW1lbnREcm9wXCJdLFxuICBzdGF0ZXM6IHtcbiAgICBpZGxlOiB7XG4gICAgICBvbjoge1xuICAgICAgICBPUEVOOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wib3BlbkZpbGVQaWNrZXJcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJEUk9QWk9ORS5DTElDS1wiOiB7XG4gICAgICAgICAgYWN0aW9uczogW1wib3BlbkZpbGVQaWNrZXJcIl1cbiAgICAgICAgfSxcbiAgICAgICAgXCJEUk9QWk9ORS5GT0NVU1wiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcImZvY3VzZWRcIlxuICAgICAgICB9LFxuICAgICAgICBcIkRST1BaT05FLkRSQUdfT1ZFUlwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcImRyYWdnaW5nXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgZm9jdXNlZDoge1xuICAgICAgb246IHtcbiAgICAgICAgXCJEUk9QWk9ORS5CTFVSXCI6IHtcbiAgICAgICAgICB0YXJnZXQ6IFwiaWRsZVwiXG4gICAgICAgIH0sXG4gICAgICAgIE9QRU46IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJvcGVuRmlsZVBpY2tlclwiXVxuICAgICAgICB9LFxuICAgICAgICBcIkRST1BaT05FLkNMSUNLXCI6IHtcbiAgICAgICAgICBhY3Rpb25zOiBbXCJvcGVuRmlsZVBpY2tlclwiXVxuICAgICAgICB9LFxuICAgICAgICBcIkRST1BaT05FLkRSQUdfT1ZFUlwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcImRyYWdnaW5nXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgZHJhZ2dpbmc6IHtcbiAgICAgIG9uOiB7XG4gICAgICAgIFwiRFJPUFpPTkUuRFJPUFwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcImlkbGVcIixcbiAgICAgICAgICBhY3Rpb25zOiBbXCJzZXRFdmVudEZpbGVzXCJdXG4gICAgICAgIH0sXG4gICAgICAgIFwiRFJPUFpPTkUuRFJBR19MRUFWRVwiOiB7XG4gICAgICAgICAgdGFyZ2V0OiBcImlkbGVcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBpbXBsZW1lbnRhdGlvbnM6IHtcbiAgICBlZmZlY3RzOiB7XG4gICAgICBwcmV2ZW50RG9jdW1lbnREcm9wKHsgcHJvcCwgc2NvcGUgfSkge1xuICAgICAgICBpZiAoIXByb3AoXCJwcmV2ZW50RG9jdW1lbnREcm9wXCIpKSByZXR1cm47XG4gICAgICAgIGlmICghcHJvcChcImFsbG93RHJvcFwiKSkgcmV0dXJuO1xuICAgICAgICBpZiAocHJvcChcImRpc2FibGVkXCIpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGRvYyA9IHNjb3BlLmdldERvYygpO1xuICAgICAgICBjb25zdCBvbkRyYWdPdmVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgZXZlbnQ/LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG9uRHJvcCA9IChldmVudCkgPT4ge1xuICAgICAgICAgIGlmIChjb250YWlucyhnZXRSb290RWwoc2NvcGUpLCBnZXRFdmVudFRhcmdldChldmVudCkpKSByZXR1cm47XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGNhbGxBbGwoYWRkRG9tRXZlbnQoZG9jLCBcImRyYWdvdmVyXCIsIG9uRHJhZ092ZXIsIGZhbHNlKSwgYWRkRG9tRXZlbnQoZG9jLCBcImRyb3BcIiwgb25Ecm9wLCBmYWxzZSkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgYWN0aW9uczoge1xuICAgICAgc3luY0lucHV0RWxlbWVudCh7IHNjb3BlLCBjb250ZXh0IH0pIHtcbiAgICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlucHV0RWwgPSBnZXRIaWRkZW5JbnB1dEVsKHNjb3BlKTtcbiAgICAgICAgICBpZiAoIWlucHV0RWwpIHJldHVybjtcbiAgICAgICAgICBzZXRJbnB1dEZpbGVzKGlucHV0RWwsIGNvbnRleHQuZ2V0KFwiYWNjZXB0ZWRGaWxlc1wiKSk7XG4gICAgICAgICAgY29uc3Qgd2luID0gc2NvcGUuZ2V0V2luKCk7XG4gICAgICAgICAgaW5wdXRFbC5kaXNwYXRjaEV2ZW50KG5ldyB3aW4uRXZlbnQoXCJjaGFuZ2VcIiwgeyBidWJibGVzOiB0cnVlIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgb3BlbkZpbGVQaWNrZXIoeyBzY29wZSB9KSB7XG4gICAgICAgIHJhZigoKSA9PiB7XG4gICAgICAgICAgZ2V0SGlkZGVuSW5wdXRFbChzY29wZSk/LmNsaWNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHNldEZpbGVzKHBhcmFtcykge1xuICAgICAgICBjb25zdCB7IGNvbXB1dGVkLCBjb250ZXh0LCBldmVudCB9ID0gcGFyYW1zO1xuICAgICAgICBjb25zdCB7IGFjY2VwdGVkRmlsZXMsIHJlamVjdGVkRmlsZXMgfSA9IGdldEV2ZW50RmlsZXMocGFyYW1zLCBldmVudC5maWxlcyk7XG4gICAgICAgIGNvbnRleHQuc2V0KFxuICAgICAgICAgIFwiYWNjZXB0ZWRGaWxlc1wiLFxuICAgICAgICAgIGNvbXB1dGVkKFwibXVsdGlwbGVcIikgPyBhY2NlcHRlZEZpbGVzIDogYWNjZXB0ZWRGaWxlcy5sZW5ndGggPiAwID8gW2FjY2VwdGVkRmlsZXNbMF1dIDogW11cbiAgICAgICAgKTtcbiAgICAgICAgY29udGV4dC5zZXQoXCJyZWplY3RlZEZpbGVzXCIsIHJlamVjdGVkRmlsZXMpO1xuICAgICAgfSxcbiAgICAgIHNldEV2ZW50RmlsZXMocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHsgY29tcHV0ZWQsIGNvbnRleHQsIGV2ZW50LCBwcm9wIH0gPSBwYXJhbXM7XG4gICAgICAgIGNvbnN0IHsgYWNjZXB0ZWRGaWxlcywgcmVqZWN0ZWRGaWxlcyB9ID0gZ2V0RXZlbnRGaWxlcyhwYXJhbXMsIGV2ZW50LmZpbGVzKTtcbiAgICAgICAgY29uc3Qgc2V0ID0gKGZpbGVzKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbXB1dGVkKFwibXVsdGlwbGVcIikpIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwiYWNjZXB0ZWRGaWxlc1wiLCAocHJldikgPT4gWy4uLnByZXYsIC4uLmZpbGVzXSk7XG4gICAgICAgICAgICBjb250ZXh0LnNldChcInJlamVjdGVkRmlsZXNcIiwgcmVqZWN0ZWRGaWxlcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwiYWNjZXB0ZWRGaWxlc1wiLCBbZmlsZXNbMF1dKTtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCByZWplY3RlZEZpbGVzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJlamVjdGVkRmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNldChcImFjY2VwdGVkRmlsZXNcIiwgY29udGV4dC5nZXQoXCJhY2NlcHRlZEZpbGVzXCIpKTtcbiAgICAgICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCByZWplY3RlZEZpbGVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHByb3AoXCJ0cmFuc2Zvcm1GaWxlc1wiKTtcbiAgICAgICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICAgIHRyYW5zZm9ybShhY2NlcHRlZEZpbGVzKS50aGVuKHNldCkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgd2FybihgW3phZy1qcy9maWxlLXVwbG9hZF0gZXJyb3IgdHJhbnNmb3JtaW5nIGZpbGVzXG4ke2Vycn1gKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXQoYWNjZXB0ZWRGaWxlcyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICByZW1vdmVGaWxlKHsgY29udGV4dCwgZXZlbnQgfSkge1xuICAgICAgICBjb25zdCBmaWxlcyA9IGNvbnRleHQuZ2V0KFwiYWNjZXB0ZWRGaWxlc1wiKS5maWx0ZXIoKGZpbGUpID0+ICFpc0ZpbGVFcXVhbChmaWxlLCBldmVudC5maWxlKSk7XG4gICAgICAgIGNvbnN0IHJlamVjdGVkRmlsZXMgPSBjb250ZXh0LmdldChcInJlamVjdGVkRmlsZXNcIikuZmlsdGVyKChpdGVtKSA9PiAhaXNGaWxlRXF1YWwoaXRlbS5maWxlLCBldmVudC5maWxlKSk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwiYWNjZXB0ZWRGaWxlc1wiLCBmaWxlcyk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCByZWplY3RlZEZpbGVzKTtcbiAgICAgIH0sXG4gICAgICBjbGVhclJlamVjdGVkRmlsZXMoeyBjb250ZXh0IH0pIHtcbiAgICAgICAgY29udGV4dC5zZXQoXCJyZWplY3RlZEZpbGVzXCIsIFtdKTtcbiAgICAgIH0sXG4gICAgICBjbGVhckZpbGVzKHsgY29udGV4dCB9KSB7XG4gICAgICAgIGNvbnRleHQuc2V0KFwiYWNjZXB0ZWRGaWxlc1wiLCBbXSk7XG4gICAgICAgIGNvbnRleHQuc2V0KFwicmVqZWN0ZWRGaWxlc1wiLCBbXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcbnZhciBwcm9wcyA9IGNyZWF0ZVByb3BzKCkoW1xuICBcImFjY2VwdFwiLFxuICBcImFsbG93RHJvcFwiLFxuICBcImNhcHR1cmVcIixcbiAgXCJkaXJcIixcbiAgXCJkaXJlY3RvcnlcIixcbiAgXCJkaXNhYmxlZFwiLFxuICBcImdldFJvb3ROb2RlXCIsXG4gIFwiaWRcIixcbiAgXCJpZHNcIixcbiAgXCJsb2NhbGVcIixcbiAgXCJtYXhGaWxlc1wiLFxuICBcIm1heEZpbGVTaXplXCIsXG4gIFwibWluRmlsZVNpemVcIixcbiAgXCJuYW1lXCIsXG4gIFwiaW52YWxpZFwiLFxuICBcIm9uRmlsZUFjY2VwdFwiLFxuICBcIm9uRmlsZVJlamVjdFwiLFxuICBcIm9uRmlsZUNoYW5nZVwiLFxuICBcInByZXZlbnREb2N1bWVudERyb3BcIixcbiAgXCJyZXF1aXJlZFwiLFxuICBcInRyYW5zbGF0aW9uc1wiLFxuICBcInRyYW5zZm9ybUZpbGVzXCIsXG4gIFwidmFsaWRhdGVcIlxuXSk7XG52YXIgc3BsaXRQcm9wcyA9IGNyZWF0ZVNwbGl0UHJvcHMocHJvcHMpO1xudmFyIGl0ZW1Qcm9wcyA9IGNyZWF0ZVByb3BzKCkoW1wiZmlsZVwiXSk7XG52YXIgc3BsaXRJdGVtUHJvcHMgPSBjcmVhdGVTcGxpdFByb3BzKGl0ZW1Qcm9wcyk7XG5cbmV4cG9ydCB7IGFuYXRvbXksIGNvbm5lY3QsIGl0ZW1Qcm9wcywgbWFjaGluZSwgcHJvcHMsIHNwbGl0SXRlbVByb3BzLCBzcGxpdFByb3BzIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@zag-js+file-upload@1.18.2/node_modules/@zag-js/file-upload/dist/index.mjs\n");

/***/ })

};
;